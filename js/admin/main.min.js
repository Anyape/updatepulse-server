jQuery(document).ready(function(e){function t(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.documentElement.textContent}if(-1!==location.href.indexOf("action=")){var a=window.location.href.split("?");a[1]=a[1].replace("action=","action_done="),history.pushState(null,"",a.join("?"))}e("body").on("click",".upserv-modal-open-handle",function(t){var a=e("#"+e(this).data("modal_id"));t.preventDefault(),a.trigger("open",[e(this)])}),e("body").on("click",".upserv-modal-close-handle",function(t){var a=e("#"+e(this).data("modal_id"));t.preventDefault(),a.trigger("close",[e(this)])}),e("body").on("click",".upserv-modal-close",function(t){var a=e(this).closest(".upserv-modal");t.preventDefault(),a.trigger("close",[e(this)])}),e("body").on("open",".upserv-modal",function(t){var a=e(this);a.data("handler",t),e(document).trigger("upserv-modal-open",[t]),a.removeClass("hidden"),e("body").addClass("upserv-modal-open")}),e("body").on("close",".upserv-modal",function(t){var a=e(this);a.data("handler",null),e(document).trigger("upserv-modal-close",[t]),a.addClass("hidden"),e("body").removeClass("upserv-modal-open")}),e('input[type="password"].secret').on("focus",function(){e(this).attr("type","text")}),e('input[type="password"].secret').on("blur",function(){e(this).attr("type","password")}),e(".ajax-trigger").on("click",function(a){a.preventDefault();var n=e(this),o=n.data("type"),r={type:o,nonce:e("#upserv_plugin_options_handler_nonce").val(),action:"upserv_"+n.data("action"),data:n.data("selector")?e(n.data("selector")).get().reduce(function(e,t){return"checkbox"===t.type||"radio"===t.type?e[t.id]=t.checked:e[t.id]=t.value,e},{}):{}};n.attr("disabled","disabled"),e.ajax({url:UPServAdminMain.ajax_url,data:r,type:"POST",success:function(a){if(a.success){if(a.data){o="";e.each(a.data,function(e,a){"btnVal"!==e&&(o+=t(a)+"\n")}),o.length&&window.alert(o)}}else{var o="";e.each(a.data,function(e,a){o+=t(a.message)+"\n"}),window.alert(o)}n.removeAttr("disabled"),a.data&&a.data.btnVal&&n.val(a.data.btnVal)},error:function(e,t){UPServAdminMain.debug&&console.log(t)}})})});