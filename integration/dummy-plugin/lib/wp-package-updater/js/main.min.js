jQuery(document).ready(function(e){e("body").on("click",".wrap-license .activate-license",function(a){a.preventDefault();var n=e(this).closest(".wrap-license"),i={nonce:n.data("nonce"),license_key:n.find(".license").val(),package_slug:n.data("package_slug"),action:WP_PackageUpdater.action_prefix+"_activate_license"};e.ajax({url:WP_PackageUpdater.ajax_url,data:i,type:"POST",success:function(a){if(a.success)n.find(".current-license").html(n.find(".license").val()),n.find(".current-license-error").addClass("hidden"),n.find(".license-message").removeClass("hidden"),n.find(".deactivate-license-container").removeClass("hidden"),n.find(".activate-license-container").addClass("hidden"),e(".license-error-"+n.data("package_slug")+".notice").addClass("hidden"),a.data.may_deactivate?n.find(".deactivate-license").prop("disabled",!1):n.find(".deactivate-license").prop("disabled",!0),n.find(".deactivate-license").val(a.data.deactivate_text);else{var i=n.find(".current-license-error");i.html(a.data[0].message+"<br/>"),i.removeClass("hidden"),n.find(".license-message").removeClass("hidden")}""===n.find(".current-license").html()?(n.find(".current-license-label").addClass("hidden"),n.find(".current-license").addClass("hidden")):(n.find(".current-license-label").removeClass("hidden"),n.find(".current-license").removeClass("hidden"))}})}),e("body").on("click",".wrap-license .deactivate-license",function(a){a.preventDefault();var n=e(this).closest(".wrap-license"),i={nonce:n.data("nonce"),license_key:n.find(".license").val(),package_slug:n.data("package_slug"),action:WP_PackageUpdater.action_prefix+"_deactivate_license"};e.ajax({url:WP_PackageUpdater.ajax_url,data:i,type:"POST",success:function(e){if(e.success)n.find(".current-license").html(""),n.find(".current-license-error").addClass("hidden"),n.find(".license-message").addClass("hidden"),n.find(".deactivate-license-container").addClass("hidden"),n.find(".activate-license-container").removeClass("hidden");else{var a=n.find(".current-license-error");a.html(e.data[0].message+"<br/>"),a.removeClass("hidden"),n.find(".license-message").removeClass("hidden")}""===n.find(".current-license").html()?(n.find(".current-license-label").addClass("hidden"),n.find(".current-license").addClass("hidden")):(n.find(".current-license-label").removeClass("hidden"),n.find(".current-license").removeClass("hidden"))}})})});